<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Estilos -->
  <link rel="stylesheet" href="../assets/css/main_ex.css" />
  <link rel="stylesheet" href="../assets/css/sidebar.css" />
  <link rel="stylesheet" href="../assets/css/ProgressBar.css" />
  <link rel="stylesheet" href="../assets/css/ex1.css" />
  <link rel="stylesheet" href="../assets/css/Funciones de supervivencia R(t)/exm3.css" />
  <link rel="stylesheet" href="../assets/css/M1_pagina4.css" />


  <!-- Scripts -->
  <script src="../js/sidebar.js" defer></script>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>

<body>
    <button class="back-page-btn" onclick="backPage()">
        <span class="arrow">❮</span>
    </button>
    <nav id="sidebar" class="close">
        <div id="logo-seccion">
            <a href="">
                <img src="../assets/images/logo_blanco.png" height="10px" alt="logo">
            </a>
            <button id="toggle-btn">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000">
                    <path d="M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z" />
                </svg>
            </button>
        </div>
        <div id="barra">
            <span id="barra-titulo"><strong>Progreso del Curso</strong></span>
            <div id="progreso-container">
                <div id="progreso-barra"></div>
                <span id="progreso-texto">0%</span>
            </div>
        </div>
        <div id="menu-container"></div>
    </nav>


  <!-- Logo inferior -->
  <div class="logo-container"><img src="../assets/images/logo_color.png" alt="Logo AngloAmerican" class="logo" /></div>

  <!-- Título principal -->
  <header><h1 class="titulo-epp" style="margin: 10px 60px 10px 60px;"><span class="gradient-text2">Uso de aplicativo para determinar los valores máximos y mínimos de tolerancias</span></h1></header>
  
  <!-- Secciones importadas de M1_pagina4.html -->
  <div class="container">

    <div class="navigation">
        <div class="nav-btn active" onclick="showSection2('theory2', this)">Definiciones</div>
        <div class="nav-btn" onclick="showSection2('quiz2', this)">Evaluación</div>
    </div>

    <!-- Sección Teoría -->
    <div id="theory2" class="content-section active">
        <div class="timeline-container">
            <div class="timeline-header">
                <h2 style="color: var(--color-azul); text-align: center; margin-bottom: 40px; font-size: 2rem;">
                    ¿Cómo funciona?
                </h2>
            </div>

            <div class="timeline">
                <div class="timeline-item" onclick="expandTimelineCard(this)">
                    <div class="timeline-dot">1</div>
                    <div class="timeline-content">
                        <div class="timeline-card right">
                            <h3>Instalación</h3>
                            <p>Acceder a la <span class="highlight">Play Store</span> o <span class="highlight">App Store</span> y buscar la siguiente aplicación</p>
                            <img src="../assets/images/M1/app_1.png" alt="Instalacion" style="width: 100%; max-width: 100%; margin-top: 24px; border-radius: 10px; display: block;">
                        </div>
                    </div>
                </div>

                <div class="timeline-item" onclick="expandTimelineCard(this)">
                    <div class="timeline-dot">2</div>
                    <div class="timeline-content">
                        <div class="timeline-card left">
                            <h3>Verificación</h3>
                            <p><span class="highlight">Verificar</span> el sistema de unidades en el que se está trabajando</p>
                            <img src="../assets/images/M1/app_2.png" alt="Instalacion" style="width: 100%; max-width: 100%; margin-top: 24px; border-radius: 10px; display: block;">
                        </div>
                    </div>
                </div>

                <div class="timeline-item" onclick="expandTimelineCard(this)">
                    <div class="timeline-dot">3</div>
                    <div class="timeline-content">
                        <div class="timeline-card right">
                            <h3>Ajustes</h3>
                            <p><span class="highlight">Colocar</span>la medida nominal del eje o del agujero haciendo uso del teclado en pantalla</p>
                            <img src="../assets/images/M1/app_3.png" alt="Instalacion" style="width: 100%; max-width: 100%; margin-top: 24px; border-radius: 10px; display: block;">
                        </div>
                    </div>
                </div>

                <div class="timeline-item" onclick="expandTimelineCard(this)">
                    <div class="timeline-dot">4</div>
                    <div class="timeline-content">
                        <div class="timeline-card left">
                            <h3>Colocar</h3>
                            <p><span class="highlight">Seleccionar</span>la posición y la tolerancia, desplazando de arriba hacia abajo hasta que se marquen en color celeste</p>
                            <img src="../assets/images/M1/app_4.png" alt="Instalacion" style="width: 100%; max-width: 100%; margin-top: 24px; border-radius: 10px; display: block;">
                        </div>
                    </div>
                </div>

                <div class="timeline-item" onclick="expandTimelineCard(this)">
                    <div class="timeline-dot">5</div>
                    <div class="timeline-content">
                        <div class="timeline-card right">
                            <h3>Revisar</h3>
                            <p><span class="highlight">Verificar</span>las medidas de límite superior e inferior mostrados en la parte superior de la pantalla</p>
                            <img src="../assets/images/M1/app_5.png" alt="Instalacion" style="width: 100%; max-width: 100%; margin-top: 24px; border-radius: 10px; display: block;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sección Caso de Estudio -->
    <div id="case2" class="content-section">
        <div class="case-study">
            <div class="case-header">
                <h2>Relación con la calidad y la medición</h2>
            </div>
            
            <div class="theory-grid">
                <div class="theory-card">
                    <h3>Incertidumbre</h3>
                    <p>La calidad de una medida está estrechamente vinculada con la<span class="highlight">incertidumbre de medición</span>, que es el margen de duda sobre la exactitud del<span class="highlight">valor obtenido</span>.</p>
                </div>

                <div class="theory-card">
                    <h3>Definición y función de las tolerancias de fabricación</h3>
                    <p>Las<span class="highlight">tolerancias de fabricación</span>definen qué tan precisas deben ser las dimensiones para que el producto cumpla con su<span class="highlight">función</span>.</p>
                </div>

                <div class="theory-card">
                    <h3>Impacto de tolerancias estrictas en la producción</h3>
                    <p>Cuanto más estrictas sean las<span class="highlight">tolerancias</span>, mayor será la precisión de medida requerida para verificar que se cumplen las<span class="highlight">especificaciones</span>.</p>
                    <p>Esta necesidad de precisión influye directamente en los<span class="highlight">equipos de medición</span>, el<span class="highlight">control de calidad</span> y los<span class="highlight">costos de producción</span>.</p>
                </div>
            </div>  
        </div>  
    </div>

    <!-- Sección Análisis -->
    <div id="analysis2" class="content-section">
        <div class="case-study">
            <div class="case-header">
                <h2>¡A tomar nota!</h2>
                <div class="card-content hover-highlight" style="margin-top: 20px;">
                    Las <span class="highlight">tolerancias geométricas</span>deben especificarse únicamente en aquellos aspectos que impacten directamente:
                </div>
            </div>

            <div class="steps-container">
                <div class="step-card">
                    <h4>La funcionalidad del producto</h4>
                    <p>Garantizar que la pieza cumpla correctamente su propósito de uso.</p>
                </div>

                <div class="step-card">
                    <h4>La intercambiabilidad entre piezas</h4>
                    <p>Asegurar que diferentes piezas encajen y funcionen de manera uniforme.</p>
                </div>

                <div class="step-card">
                    <h4>Aspectos críticos relacionados con el proceso de fabricación</h4>
                    <p>Mantener la viabilidad y estabilidad del proceso productivo.</p>
                </div>
            </div>
            <div class="card-content hover-highlight" style="margin-top: 40px; text-align: center;">
                Evitar la imposición de<span class="highlight">tolerancias innecesariamente estrictas</span>, ya que, incrementan los costos de fabricación y verificación sin aportar valor funcional.
            </div>
        </div>
    </div>

    <!-- Sección Quiz (bloque original para funcionalidad) -->
    <div id="quiz2" class="content-section">
        <div class="quiz-container">
            <h2 style="color: var(--color-azul); text-align: center; margin-bottom: 30px;">Evaluación de
                Conocimientos</h2>

            <div id="question1" class="quiz-question">
                <!-- La pregunta se cargará dinámicamente -->
            </div>
            <div class="quiz-options">
                <!-- Las opciones se cargarán dinámicamente -->
            </div>

            <button class="btn" onclick="nextQuestion()" id="nextBtn" style="display: none;">
                Siguiente Pregunta
                <span class="arrow">❯</span>
            </button>

            <div id="results" style="display: none; text-align: center; margin-top: 30px;">
                <h3 style="color: var(--color-azul-oscuro);">¡Evaluación Completada!</h3>
                <p id="finalScore">Has respondido correctamente <span id="scoreText"></span> de 2 preguntas</p>
                <p id="finalMessage"></p>
                <button class="btn" onclick="resetQuiz()">Reiniciar Evaluación</button>
                <button class="btn" onclick="goToNextPage()" style="background: var(--color-azul-degradado); color: var(--color-blanco);">
                    Continuar
                    <span class="arrow">❯</span>
                </button>
            </div>
        </div>
    </div>
    </div>
  </div>

  <!--AUDIOv2-->
  <div class="audio-control-wrapper" style="z-index: 9999;">
      <button class="audio-toggle-btn" id="audioToggle">
          <svg id="togglePlayIcon" viewBox="0 0 24 24">
              <path d="M8 5v14l11-7z" />
          </svg>
          <svg id="togglePauseIcon" viewBox="0 0 24 24" style="display: none">
              <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
          </svg>
      </button>

      <div class="audio-controls" id="audioControls">
          <div class="custom-audio-player">
              <div class="audio-main-controls">
                  <button class="control-btn volume-btn" id="volumeToggle">
                      <svg id="volumeIcon" viewBox="0 0 24 24">
                          <path
                              d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z" />
                      </svg>
                      <svg id="muteIcon" viewBox="0 0 24 24" style="display: none">
                          <path
                              d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" />
                      </svg>
                  </button>

                  <button class="control-btn play-pause-btn" id="playPauseBtn">
                      <svg id="playIcon" viewBox="0 0 24 24">
                          <path d="M8 5v14l11-7z" />
                      </svg>
                      <svg id="pauseIcon" viewBox="0 0 24 24" style="display: none">
                          <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                      </svg>
                  </button>

                  <button class="control-btn speed-btn" id="speedBtn">
                      <svg viewBox="0 0 24 24">
                          <path
                              d="M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44z" />
                          <path
                              d="M10.59 15.41a2 2 0 0 0 2.83 0l5.66-5.66a2 2 0 0 0-2.83-2.83L12 11.17 7.76 6.93a2 2 0 0 0-2.83 2.83l5.66 5.65z" />
                      </svg>
                  </button>
              </div>

              <div class="progress-container">
                  <div class="progress-bar" id="progressBar">
                      <div class="progress-fill" id="progressFill"></div>
                  </div>
                  <div class="time-display">
                      <span id="currentTime">0:00</span>
                      <span id="duration">0:00</span>
                  </div>
              </div>

              <div class="volume-control">
                  <div class="volume-slider" id="volumeSlider">
                      <div class="volume-fill" id="volumeFill"></div>
                  </div>
                  <div class="speed-control">
                      <span class="speed-display" id="speedDisplay">1x</span>
                  </div>
              </div>
          </div>

          <!-- Audio element oculto -->
          <audio id="audioPlayer" preload="metadata" autoplay>
              <source src="../assets/audio/M1/M1_pagina3.wav" type="audio/mp3" />
              Tu navegador no soporta el elemento de audio.
          </audio>
      </div>
  </div>

  <script src="../js/audioPlayer.js"></script>
  <script>
    // Variables globales para el quiz
    let currentQuestion = 1;
    let correctAnswers = 0;

    // Preguntas específicas sobre aplicativos para tolerancias
    const quizQuestions = [
        {
            q: "1. ¿Para las tolerancias determinadas ¿Qué instrumento de medición se debe usar?",
            options: [
                { text: "Vernier", correct: false },
                { text: "Alexómetro", correct: false },
                { text: "Regla", correct: false },
                { text: "Micrómetro", correct: true }
            ]
        },
        {
            q: "2. Para las tolerancias determinadas ¿Con qué grado de precisión se debe realizar la medición?",
            options: [
                { text: "Decimal", correct: false },
                { text: "Centecimal", correct: false },
                { text: "Milesimal", correct: true },
                { text: "Diezmilesimal", correct: false }
            ]
        }
    ];

    // Función para cargar pregunta
    function loadQuestion(questionNum) {
        if (questionNum <= quizQuestions.length) {
            const question = quizQuestions[questionNum - 1];
            document.getElementById('question1').textContent = question.q;

            const optionsContainer = document.querySelector('.quiz-options');
            optionsContainer.innerHTML = '';

            question.options.forEach(option => {
                const div = document.createElement('div');
                div.className = 'quiz-option';
                div.textContent = option.text;
                div.onclick = () => selectAnswer(div, option.correct);
                optionsContainer.appendChild(div);
            });

            document.getElementById('nextBtn').style.display = 'none';
        }
    }

    // Función para seleccionar respuesta
    function selectAnswer(option, isCorrect) {
        // Deshabilitar todas las opciones
        const options = option.parentNode.querySelectorAll('.quiz-option');
        options.forEach(opt => {
            opt.style.pointerEvents = 'none';
            if (opt === option) {
                opt.classList.add(isCorrect ? 'correct' : 'incorrect');
            } else if (opt.onclick.toString().includes('true')) {
                opt.classList.add('correct');
            }
        });

        if (isCorrect) {
            correctAnswers++;
        }

        document.getElementById('nextBtn').style.display = 'inline-block';
    }

    // Función para siguiente pregunta
    function nextQuestion() {
        currentQuestion++;

        if (currentQuestion <= 2) {
            loadQuestion(currentQuestion);
        } else {
            showResults();
        }
    }

    // Función para mostrar resultados
    function showResults() {
        const percentage = (correctAnswers / 2) * 100;
        document.getElementById('scoreText').textContent = correctAnswers;

        let message = "";
        if (percentage === 100) {
            message = "¡Excelente! Dominas completamente el uso del aplicativo de tolerancias.";
        } else if (percentage >= 66) {
            message = "¡Muy bien! Tienes un buen entendimiento del aplicativo.";
        } else {
            message = "Considera revisar los pasos para usar el aplicativo nuevamente.";
        }

        document.getElementById('finalMessage').textContent = message;
        document.getElementById('results').style.display = 'block';
        document.getElementById('nextBtn').style.display = 'none';

        // Ocultar la pregunta actual
        document.getElementById('question1').style.display = 'none';
        document.querySelector('.quiz-options').style.display = 'none';
    }

    // Función para reiniciar quiz
    function resetQuiz() {
        currentQuestion = 1;
        correctAnswers = 0;

        // Mostrar elementos del quiz
        document.getElementById('question1').style.display = 'block';
        document.querySelector('.quiz-options').style.display = 'grid';
        document.getElementById('results').style.display = 'none';
        document.getElementById('nextBtn').style.display = 'none';

        // Cargar primera pregunta
        loadQuestion(1);
    }

    // Script para navegación SECCIONES NUEVAS
    function showSection2(sectionId, btn) {
      document.querySelectorAll('.container .content-section').forEach(s => s.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');

      document.querySelectorAll('.container .nav-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      // Si es quiz2, reiniciamos y cargamos la primera pregunta
      if(sectionId === 'quiz2'){
        setTimeout(() => {
          resetQuiz();
        }, 100);
      }
    }
  </script>
  <script src="../js/M1_pagina4.js"></script>
  <!--///////-->
  <!-- Scripts funcionales -->
  <script src="../js/SCORM.js"></script>
  <script src="../js/Funciones de supervivencia R(t)/exm3.js"></script>
  <script>
    // Navegación
    function goHome() { window.location.href = '../index.html'; }
    function backPage() { window.location.href = 'M1_pagina2_4.html'; }
    function goToNextPage() { window.location.href = 'M2_inicio.html'; }

    ScormManager.init();
    ScormManager.guardarProgreso("M3_pagina3.html");

    document.addEventListener("DOMContentLoaded", () => {
      const progreso = ScormManager.cargarProgreso();
      const porcentaje = progreso.score ? parseInt(progreso.score) : 0;
      document.getElementById("progreso-barra").style.width = porcentaje + "%";
      document.getElementById("progreso-texto").textContent = porcentaje + "%";
    });
  </script>
  <script>
    fetch("./componentes/exm3-info.html")
            .then(res => res.text())
            .then(html => {
            document.getElementById("info").innerHTML = html;
    });


  </script>


</body>
</html>